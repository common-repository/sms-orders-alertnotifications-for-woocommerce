!function(t){"use strict";function e(){var e={name:t("#add_egoi_sms_order_tracking_name").val(),url:t("#add_egoi_sms_order_tracking_url").val(),security:smsonw_config_ajax_object.ajax_nonce,action:"smsonw_add_custom_carrier"};n({type:"input"}),t.post(smsonw_meta_box_ajax_object.ajax_url,e,function(s){var n;r({type:"input"}),s.includes("ERROR")?a((s=JSON.parse(s)).ERROR):(t("#add_egoi_sms_order_tracking_name").val(""),t("#add_egoi_sms_order_tracking_url").val(""),n=e,t("#custom_carriers_rows").append('<tr id = "custom_carrier_'+n.name+'">\n<td>\n<span style="width: 100%;" value="">'+n.name+'</span>\n</td>\n<td>\n<span style="min-width: 400px;width: 100%;" value="">'+n.url+'</span>\n</td>\n<td>\n<div class="button remove_carrier remove-button" id="remove_custom_carrier_'+n.name+'">x</div>\n</td>\n</tr>'))})}function a(e){t("#tracking_texts_message").append('<div class="notice notice-error is-dismissible">\n        <p>'+e+"</p>\n        </div>")}function s(){return 0!=t("#add_egoi_sms_order_tracking_url").val().length&&0!=t("#add_egoi_sms_order_tracking_name").val().length}function n(e){switch(e.type){case"input":t("#add_egoi_sms_order_tracking_button").addClass("loading"),t("#add_egoi_sms_order_tracking_name").attr("disabled",!0),t("#add_egoi_sms_order_tracking_url").attr("disabled",!0);break;case"remove":t("#"+e.id).addClass("loading"),t("#"+e.id).html("&nbsp;&nbsp;")}}function r(e){switch(e.type){case"input":t("#add_egoi_sms_order_tracking_button").removeClass("loading"),t("#add_egoi_sms_order_tracking_name").attr("disabled",!1),t("#add_egoi_sms_order_tracking_url").attr("disabled",!1);break;case"remove":t("#"+e.id).removeClass("loading"),t("#"+e.id).html("x")}}function i(e){t(".nav-tab-addon").each(function(){t(this).attr("class","nav-tab nav-tab-addon")}),t(e).attr("class","nav-tab nav-tab-addon nav-tab-active")}function o(e){t(".wrap-addon").each(function(){t(this).hide()}),t(e).show()}function d(e,a){e.forEach(function(e){t("#sms_order_texts_"+e).hide(),t("#sms_order_texts_"+e+" :input").attr("disabled",!0)}),a.forEach(function(e){t("#sms_order_payment_texts_"+e).hide(),t("#sms_order_payment_texts_"+e+" :input").attr("disabled",!0)}),t("#sms_texts_tags").hide(),t("#sms_payment_texts_tags").hide()}function m(e,a){e&&(t("#sms_order_texts_"+e).show(),t("#sms_order_texts_"+e+" :input").attr("disabled",!1),t("#sms_texts_tags").show()),a&&(t("#sms_order_payment_texts_"+a).show(),"billet"!==a?t("#sms_order_payment_texts_"+a+" :input").attr("disabled",!1):(t("#sms_order_payment_texts_"+a+" :input[name='egoi_sms_order_payment_text_pt_BR']").attr("disabled",!1),t("#sms_order_payment_texts_"+a+" :input[name='egoi_sms_order_reminder_text_pt_BR']").attr("disabled",!1),t("#sms_order_payment_texts_"+a+" :input[type='submit']").attr("disabled",!1)),t("#sms_payment_texts_tags").show())}function c(e){e.forEach(function(e){t("#email_order_payment_texts_"+e).hide(),t("#email_order_payment_texts_"+e+" :input").attr("disabled",!0)}),t("#email_payment_texts_tags").hide()}function l(e){e&&(t("#email_order_payment_texts_"+e).show(),"billet"!==e?t("#email_order_payment_texts_"+e+" :input").attr("disabled",!1):(t("#email_order_payment_texts_"+e+" :input[name='egoi_sms_order_reminder_email_text_pt_BR']").attr("disabled",!1),t("#email_order_payment_texts_"+e+" :input[type='submit']").attr("disabled",!1)),t("#email_payment_texts_tags").show())}function u(){t("#admin_phone").val().length>=6?t(".admin-order-status").prop("disabled",!1):t(".admin-order-status").prop("disabled",!0)}t(document).ready(function(){var p=["en","es","pt","pt_BR"],g=["multibanco","billet"],f=t("#form_info").data("form-id"),h=t("#form_info").data("form-lang"),v=t("#form_info").data("form-method");if(t("#form_info").length&&"form-sms-order-senders"!=f&&"form-sms-order-tests"!=f&&""!=f){var b=f.split("-"),x="tab-sms-"+b[3];void 0!==b[4]&&(x=x+"-"+b[4]),i("#nav-"+x),o("#"+x),t("#sms_text_language").val(h),t("#sms_payment_methode").val(v),t("#email_payment_method").val(v),d(p,g),m(h,v),c(g),l(v)}else o("#tab-sms-senders"),d(p,g),c(g);t(".nav-tab-addon").on("click",function(){i(this),o("#"+t(".nav-tab-active").attr("id").substring(4))}),t("#sms_text_language").on("change",function(){var e=t(this).val(),a=t("#sms_payment_method").val();d(p,g),m(e,a)}),t("#sms_payment_method").on("change",function(){var e=t(this).val(),a=t("#sms_text_language").val();d(p,g),m(a,e)}),t("#email_payment_method").on("change",function(){var e=t(this).val();c(g),l(e)}),t("#button-test-sms").on("click",function(){t("#test-sms").show()});var y="",k=0;t(".sms_texts_tags_button").on("click",function(){var e=t(this).data("text-cod");if(""!==y){var a=y.val(),s=a.substring(0,k)+e+a.substring(k);y.val(s).focus()}}),t("#form-sms-order-texts textarea").focusout(function(){y=t(this),k=t(this).getCursorPosition()}),t("#form-sms-order-payment-texts textarea").focusout(function(){y=t(this),k=t(this).getCursorPosition()}),t("#form-email-order-payment-texts textarea").focusout(function(){y=t(this),k=t(this).getCursorPosition()}),t("#form-email-order-payment-texts textarea").keydown(function(e){if(13==e.keyCode){var a=t(this).val(),s=t(this).getCursorPosition(),n=a.substring(0,s)+"\n"+a.substring(s);t(this).val(n)}});var $=t("#sender_hash");null==$.val()&&(t("#form-sms-order-senders :input").prop("disabled",!0),$.prop("disabled",!1)),$.on("change",function(){t("#form-sms-order-senders :input").prop("disabled",!1),u()}),t("#admin_phone").length&&(u(),t("#admin_phone").on("input",function(){u()})),t("#button_view_help").on("click",function(){i("#nav-tab-sms-help"),o("#tab-sms-help")}),t("#add_egoi_sms_order_tracking_button").on("click",function(){"disabled"!=t("#add_egoi_sms_order_tracking_button").attr("disabled")&&e()}),t("#add_egoi_sms_order_tracking_button").attr("disabled",!0),t("#custom_carriers_rows").keydown(function(t){if(13==t.keyCode){if(t.preventDefault(),!s())return!1;e()}}),t("#add_egoi_sms_order_tracking_url").bind("input",function(){s()?t("#add_egoi_sms_order_tracking_button").attr("disabled",!1):t("#add_egoi_sms_order_tracking_button").attr("disabled",!0)}),t("#add_egoi_sms_order_tracking_name").bind("input",function(){s()?t("#add_egoi_sms_order_tracking_button").attr("disabled",!1):t("#add_egoi_sms_order_tracking_button").attr("disabled",!0)}),t("#custom_carriers_rows").on("click",".remove_carrier",function(e){var s,i;s=t(e.target).attr("id"),i={security:smsonw_config_ajax_object.ajax_nonce,action:"smsonw_remove_custom_carrier",name:s.replace("remove_custom_carrier_","")},n({type:"remove",id:s}),t.post(smsonw_meta_box_ajax_object.ajax_url,i,function(e){r({type:"remove",id:s}),e.includes("ERROR")?a((e=JSON.parse(e)).ERROR):function e(a){t("#"+a.replace("remove_","")).children("td, th").animate({padding:0}).wrapInner("<div />").children().slideUp(function(){t(this).closest("tr").remove()})}(s)})}),t("#help_carrier_url").click(function(t){return t.preventDefault(),i("#nav-tab-sms-help"),o("#tab-sms-help"),!1})})}(jQuery),function(t){t.fn.getCursorPosition=function(){var e=t(this).get(0),a=0;if("selectionStart"in e)a=e.selectionStart;else if("selection"in document){e.focus();var s=document.selection.createRange(),n=document.selection.createRange().text.length;s.moveStart("character",-e.value.length),a=s.text.length-n}return a}}(jQuery);