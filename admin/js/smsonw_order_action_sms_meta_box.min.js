!function(e){"use strict";e(document).ready(function(){e("#egoi_send_order_sms_button").on("click",function(){if(""==e("#egoi_send_order_sms_message").val())return e("#egoi_send_order_sms_notice").hide(),e("#egoi_send_order_sms_error").show(),!1;e("#egoi_send_order_sms_error").hide(),e("#egoi_send_order_sms_notice").show();var r={action:"smsonw_order_action_sms_meta_box",order_id:e("#egoi_send_order_sms_order_id").val(),country:e("#egoi_send_order_sms_order_country").val(),recipient:e("#egoi_send_order_sms_recipient").val(),message:e("#egoi_send_order_sms_message").val(),security:smsonw_meta_box_ajax_object.ajax_nonce};e.post(smsonw_meta_box_ajax_object.ajax_url,r,function(r){var i=jQuery.parseJSON(r);i.message?(e(".order_notes").prepend("<li class='note system-note'><div class='note_content'><p>"+i.message+"</p></div><p class='meta'><abbr class='exact-date'>"+i.date+"</abbr></li>"),e("#egoi_send_order_sms_notice").hide()):i.errorCode&&(e("#egoi_send_order_sms_notice").hide(),e("#egoi_send_order_sms_error").show().text(i.errors[0]))})}),e("#egoi_add_tracking").attr("disabled",!0),e("#egoi-add-tracking-code").keyup(function(){0!=e(this).val().length&&0!=e("#egoi_add_tracking_carrier").val().length?e("#egoi_add_tracking").attr("disabled",!1):e("#egoi_add_tracking").attr("disabled",!0)}),e("#egoi_add_tracking_carrier").change(function(){0!=e(this).val().length&&0!=e("#egoi-add-tracking-code").val().length?e("#egoi_add_tracking").attr("disabled",!1):e("#egoi_add_tracking").attr("disabled",!0)}),e("#egoi_add_tracking").click(function(){if("disabled"!=e("#egoi_add_tracking").attr("disabled")){var i={carrier:e("#egoi_add_tracking_carrier").val(),code:e("#egoi-add-tracking-code").val()};e("#egoi-add-tracking-code").val(""),e("#egoi_add_tracking").attr("disabled",!0),r(i)}}),e("#egoi_tracking_for_sms").on("click",".egoi_close_x",function(r){r.preventDefault(),i(e(r.target).attr("id"))}),e("#egoi_tracking_for_sms").keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1});var r=function(r){return r.security=smsonw_meta_box_ajax_object.ajax_nonce,r.action="smsonw_order_add_tracking_number",r.order_id=e("#egoi_send_order_sms_order_id").val(),a("#egoi_tracking_for_sms"),e.post(smsonw_meta_box_ajax_object.ajax_url,r,function(i){if(n("#egoi_tracking_for_sms"),!i.includes("SUCCESS"))return o(i);e("#egoi_tracking_for_sms_insert").attr("disabled",!0),e("#egoi_tracking_for_sms_insert").hide(),e(".smsonw-tracking-code__list ul").append('<li id="'+r.code+'"><span class="tracking-code-link">'+e("#egoi_add_tracking_carrier option:selected").text()+': </span><a href="#" class="tracking-code-link" title="'+e("#egoi_add_tracking_carrier option:selected").text()+'">'+r.code+'</a> <a class="egoi_close_x select2-selection__clear" id="tracking-'+r.code+'"  href="#" >\xd7</a></li>')}),!0},i=function(r){var i=e("#"+(r=r.replace("tracking-","")));if(0==i.length)return!1;var t={code:r,security:smsonw_meta_box_ajax_object.ajax_nonce,action:"smsonw_order_delete_tracking_number",order_id:e("#egoi_send_order_sms_order_id").val()};return a("#egoi_tracking_for_sms"),e.post(smsonw_meta_box_ajax_object.ajax_url,t,function(r){if(n("#egoi_tracking_for_sms"),!r.includes("SUCCESS"))return o(r);i.remove(),e("#egoi_tracking_for_sms_insert").attr("disabled",!1),e("#egoi_tracking_for_sms_insert").show()}),!0},o=function(e){return console.log(e),!1},a=function(r){e(r).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},n=function(r){e(r).unblock()}})}(jQuery);